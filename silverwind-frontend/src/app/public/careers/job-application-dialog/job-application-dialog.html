<h2 mat-dialog-title class="text-xl font-bold text-gray-800 border-b pb-4">Apply for {{data.jobTitle}}</h2>

<mat-dialog-content class="!p-6">
    <form [formGroup]="form" class="flex flex-col gap-5">
        <div class="flex flex-col gap-1">
            <label class="text-sm font-medium text-gray-700">Full Name</label>
            <input formControlName="candidateName" placeholder="John Doe"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder:text-gray-400">
            <span *ngIf="form.get('candidateName')?.hasError('required') && form.get('candidateName')?.touched" class="text-xs text-red-500">Name is required</span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
            <div class="flex flex-col gap-1">
                <label class="text-sm font-medium text-gray-700">Email</label>
                <input formControlName="email" type="email" placeholder="john@example.com"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder:text-gray-400">
                <span *ngIf="form.get('email')?.hasError('required') && form.get('email')?.touched" class="text-xs text-red-500">Email is required</span>
            </div>

            <div class="flex flex-col gap-1">
                <label class="text-sm font-medium text-gray-700">Phone</label>
                <input formControlName="phone" placeholder="+1 (555) 000-0000"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder:text-gray-400">
                <span *ngIf="form.get('phone')?.hasError('required') && form.get('phone')?.touched" class="text-xs text-red-500">Phone is required</span>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
            <div class="flex flex-col gap-1">
                <label class="text-sm font-medium text-gray-700">Experience (Years)</label>
                <input type="number" formControlName="experienceYears"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder:text-gray-400">
            </div>

            <div class="flex flex-col gap-1">
                <label class="text-sm font-medium text-gray-700">Current Company</label>
                <input formControlName="currentCompany" placeholder="e.g. Google"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all placeholder:text-gray-400">
            </div>
        </div>

        <div class="flex flex-col gap-2">
            <label class="text-sm font-medium text-gray-700">Resume (PDF)</label>
            <div class="flex items-center gap-3">
                <button type="button" (click)="fileInput.click()" 
                    class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-700 flex items-center gap-2 transition-colors">
                    <mat-icon class="!w-5 !h-5 !text-[20px]">upload_file</mat-icon>
                    Upload Resume
                </button>
                <span class="text-sm text-gray-600 truncate max-w-[200px]" *ngIf="resumeFile">{{resumeFile.name}}</span>
                <input #fileInput type="file" (change)="onFileSelected($event)" accept=".pdf" class="hidden">
            </div>
            <span *ngIf="!resumeFile && form.touched" class="text-xs text-red-500">Resume is required</span>
        </div>

    </form>
</mat-dialog-content>

<mat-dialog-actions align="end" class="!px-6 !pb-6 pt-2 border-t mt-2">
    <button mat-button mat-dialog-close>Cancel</button>
    <button (click)="onSubmit()" 
        [disabled]="form.invalid || !resumeFile || isSubmitting()"
        class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium ml-2 flex items-center gap-2">
        <span *ngIf="isSubmitting()" class="animate-spin h-4 w-4 border-2 border-white rounded-full border-t-transparent"></span>
        <span *ngIf="!isSubmitting()">Submit Application</span>
        <span *ngIf="isSubmitting()">Submitting...</span>
    </button>
</mat-dialog-actions>
